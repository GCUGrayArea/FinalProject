# SD27 Final Project: Organizr

Organizr is a web service for use by health professionals seeking to match patients in need of organ transplants with compatible recipients.

## Technology
Organizr runs on a Java backend using the Spring framework, a MySQL database and an Angular frontend. Spring Boot and Apache Tomcat are used for the server, and basic authentication is provided by Spring Security. Database transactions are handled on the backend through the Java Persistence API. A RESTful web API is also provided for interaction with the service outside of the defined frontend.

## Matching
Patients may be entered in the database as donors by assigning them donor roles.Â Donors are matched with recipients by filtering these donors according to the roles they have volunteered for and their compatibility with the recipient's blood type, and sorted from there based on their degree of match to the recipient's Human Leukocyte Antigen (HLA) proteins in accordance with established practice. Greater degrees of HLA commonality reduce the risk of transplant rejection, improving outcomes for transplant recipients.

## REST API
A RESTful API is used for all database transactions, with the following endpoints:
| HTTP Verb | URI                                                     | Request Body                                               | Response Body                                                                                                                 | Purpose                                           |
|-----------|---------------------------------------------------------|------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|
| GET       | `/patients/all`                                         |                                                            | List of all patient records                                                                                                   | RETRIEVE endpoint                                 |
| GET       | `/patients/{patientId}`                                 |                                                            | Patient record with ID `patientId`                                                                                            | RETRIEVE endpoint                                 |
| GET       | `/patients/blood-type/{typeId}`                         |                                                            | List of patients with blood type matching `typeId`                                                                            | RETRIEVE endpoint                                 |
| GET       | `/patients/transplant-type/{organ}/blood-type/{typeId}` |                                                            | List of patients with blood type matching `typeId` (int) who are signed up as donors for transplants of type `organ` (string) | RETRIEVE endpoint                                 |
| POST      | `/patients`                                             | Patient record to be added to database                     | new patient record as it appears after adding to the database                                                                 | CREATE endpoint                                   |
| PUT       | `/patients/{patientId}`                                 | New version of patient record with ID `patientId`          | Updated patient record                                                                                                        | UPDATE endpoint                                   |
| DELETE    | `/patients/{patientId}`                                 |                                                            | `true` if delete succeeded, `false` otherwise                                                                                 | DELETE endpoint                                   |
| GET       | `/transplant/`                                          |                                                            | List of all patient records                                                                                                   | RETRIEVE endpoint                                 |
| GET       | `/transplant/organ/{id}`                                |                                                            | List of transplant request records with organ transplant type matching `patientId`                                            | RETRIEVE endpoint                                 |
| GET       | `/transplant/unmatched`                                 |                                                            | List of transplant request records with null `donor_id`                                                                       | RETRIEVE endpoint                                 |
| GET       | `/transplant/unapproved`                                |                                                            | List of transplant request records with non-null `donor_id` and approval status other than `approved`                         | RETRIEVE endpoint                                 |
| GET       | `/transplant/status/{status}`                           |                                                            | List of transplant request records with approval status `status`                                                              | RETRIEVE endpoint                                 |
| GET       | `/transplant/{id}`                                      |                                                            | List of transplant request records with ID matching  `id`                                                                     | RETRIEVE endpoint                                 |
| POST      | `/transplant/`                                          | Transplant request record to be added to database          | new transplant request record as it appears after adding to the database                                                      | CREATE endpoint                                   |
| PUT       | `/transplant/{id}`                                      | New version of transplant request record with ID  `id`     | Updated transplant request record                                                                                             | UPDATE endpoint                                   |
| DELETE    | `/transplant/{id}`                                      |                                                            | `true`  if delete succeeded,  `false`  otherwise                                                                              | DELETE endpoint                                   |
| GET       | `/authenticate`                                         | JSON containing username and password of a registered user | User credentials if authenticated, `null` otherwise                                                                           | user authentication                               |
| POST      | `/register`                                             | User object to be added to database                        | Login credentials for newly created user if username is not already present, `null` otherwise                                 | user registration                                 |
| GET       | `/hla`                                                  |                                                            | List of all HLA records                                                                                                       | RETRIEVE endpoint                                 |
| GET       | `/hla/{id}`                                             |                                                            | HLA record with ID  `id`                                                                                                      | RETRIEVE endpoint                                 |
| POST      | `/hla`                                                  | HLA object to be added to database                         |                                                                                                                               | CREATE endpoint                                   |
| PUT       | `/hla/{id}`                                             | new version of HLA record with ID `id`                     | Updated HLA record                                                                                                            | UPDATE endpoint                                   |
| DELETE    | `/hla/{id}`                                             |                                                            | `true`  if delete succeeded,  `false`  otherwise                                                                              | DELETE endpoint                                   |
| GET       | `/address/{id}`                                         |                                                            | List of all address records                                                                                                   | RETRIEVE endpoint                                 |
| POST      | `address/`                                              | Address object to be added to database                     | Address record with ID matching `id`                                                                                          | CREATE endpoint                                   |
| PUT       | `/address/{id}`                                         | new version of address record with ID `id`                 | updated address record                                                                                                        | UPDATE endpoint                                   |
| DELETE    | `/address/{id}`                                         |                                                            | `true`  if delete succeeded,  `false`  otherwise                                                                              | DELETE endpoint                                   |
| GET       | `/transtype/{id}`                                       |                                                            | TransplantType record with ID `id`                                                                                            |                                                   |
| POST      | `/transtype`                                            | `TransplantType` object to be added to database            | new TransplantType record                                                                                                     |                                                   |
| POST      | `/donor/{patientId}/transtype/{transplantId}`           |                                                            | patient record with ID `patientId` TransplantType list reflecting new association with TransplantType `transplantId`          | associate patient with donor role                 |
| DELETE    | `/donor/{patientId}/transtype/{transplantId}`           |                                                            | `true` if delete succeeded, `false` otherwise                                                                                 |                                                   |
| PUT       | `/transtype/{id}`                                       | updated version of TransplantType record with ID `id`      |                                                                                                                               |                                                   |
| DELETE    | `/transtype/{id}`                                       |                                                            | `true`  if delete succeeded,  `false`  otherwise                                                                              | remove association between patient and donor role |
## Angular
Organizr is accessed via a single-page application using the Angular framework. Several of the backend's Java objects are reimplemented as Angular classes, and the frontend handles requests for information using Angular services to access the REST API.
