  <div *ngIf="!selected">
    <label for="patients">Find Requests by Organ Type:</label>
    <form action="">

    <select name="types" id="types" (change)="selectOrganType($event.target.value)" [(ngModel)]="selectedType">
      <option *ngFor="let t of organTypes" value = {{t.id}}>{{t.organ}}</option>


    </select>
      <input type="submit" value="Search"  (click)="findByOrgan(selectedType.id)" />
    </form>

    <table class="table table-striped ">
    <thead>
      <tr>
        <th>ID</th>
        <th>RECIPIENT</th>
        <th>ORGAN TYPE</th>
        <th>DONOR</th>
        <th>APPROVAL STATUS</th>
        <th>CREATED AT</th>

      </tr>
    </thead>
    <tbody>

      <tr *ngFor="let tRequest of transplantRequests" (click)="selected = tRequest">
        <td>{{tRequest.id}}</td>
        <td>{{tRequest.recipient.firstName}} {{tRequest.recipient.lastName}}</td>
        <td>{{tRequest.organType.organ}}</td>
        <td><div *ngIf="tRequest.donor">{{tRequest.donor.firstName}} {{tRequest.donor.lastName}}</div></td>
        <td [ngClass]= "chooseBackground(tRequest)" >{{tRequest.approvalStatus}}</td>
        <td>{{tRequest.createdAt}}</td>
      </tr>
    </tbody>
  </table>
  <button (click)="displayTable()"  *ngIf="filtered">Back</button>
</div>




<div *ngIf="selected">

        <div *ngIf="selected"  style="text-align: center;" >
          <h1>{{selected.recipient.firstName}} {{selected.recipient.lastName}}</h1>

          <table class="table table-striped ">
            <thead>
              <tr>
                <th>ID</th>
                <th>RECIPIENT</th>
                <th>ORGAN TYPE</th>
                <th>DONOR</th>
                <th>APPROVAL STATUS</th>
                <th>CREATED AT</th>

              </tr>
            </thead>
            <tbody>

              <tr>
                <td>{{selected.id}}</td>
                <td>{{selected.recipient.firstName}} {{selected.recipient.lastName}}</td>
                <td>{{selected.organType.organ}}</td>
                <td><div *ngIf="selected.donor">{{selected.donor.firstName}} {{selected.donor.lastName}}</div></td>
                <td >{{selected.approvalStatus}}</td>
                <td>{{selected.createdAt}}</td>
              </tr>
            </tbody>
          </table>
              </div>

              <button ngif="selected" (click)="loadViableDonors(selected)">Find Viable Donors</button>
              <button (click)="displayTable()"  ngif="selected">Back</button>
              <table class="table table-striped " *ngIf="selected.donor == null">
                <thead>
                </thead>
                <tr><th>Patient ID</th><th>Name</th><th>BirthDate</th><th>Sex</th><th>Weight</th><th>Blood Type</th><th>Zip Code</th><th>Add</th><th>HLA Compatibility</th></tr>
                <tbody>


                  <tr *ngFor="let p of viableDonors">
                    <td>{{p.id}}</td>
                    <td>{{p.firstName}} {{p.lastName}}</td>
                    <td>{{p.birthDate}}</td>
                    <td>{{p.sex}}</td>
                    <td>{{p.weightKg}}</td>
                    <td>{{p.bloodType.bloodGroup}} {{p.bloodType.rh ? "+" :  "-"}}</td>
                    <td>{{p.address.zip}}</td>
                    <td>  <input (click)="setDonor(p)" type="checkbox" name="donor" [(ngModel)]="selected.donor"></td>
                    <td>{{selected.recipient.hlaCompatibility(p)}}/{{selected.recipient.hlaProteins.length}}</td>
                  </tr>
                </tbody>

              </table>

</div>



